{% extends 'back.html.twig' %}
{%block core%}




    <div class="r">


    <table class="table table-responsive table-dark" border="1">


        <div class="input-group">
                <input type="text" placeholder="Click to Search" class="form-control search-input" id="recherche">
                <span class="input-group-btn">
  <button type="submit" class="btn search-button"><i class="fa fa-search"></i></button>
  </span>
        <tr>
            <th>Sujet</th>
            <th>description</th>
            <th> changer etat</th>
            <th>+ d'information</th>
            <th>etat</th>


        </tr>
    {% for reclamation in reclamtions %}

            <tr>
                <td>
                {{ reclamation.sujet }}
                </td>
                <td>
                {{ reclamation.description }}
                </td>
                <td>
                    <a href="{{ path('UpdateEtat', {'name': 'en cours', 'id': reclamation.id})   }}"><input type="button" value="en cours" class="btn btn-warning">
                        </a>

                    <a href="{{ path('UpdateEtat', {'name': 'traité', 'id': reclamation.id})   }}"><input type="button" value="traité" class="btn btn-success">
                        </a>
                    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#exampleModal{{ reclamation.id }}" data-whatever="@getbootstrap">annuler</button>

                </td>
                <td>

                    <a href="{{ path('detail',{'id':reclamation.id}) }}" class="btn btn-primary">Details</a>
                </td>
                <td>
                {{ reclamation.etat }}
                </td>
            </tr>
{# comment modal #}
                <div class="modal fade" id="exampleModal{{ reclamation.id }}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">{{ reclamation.id }}</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <form method="post" action="{{path('annuler')}}">
                            <div class="modal-body">
                                    <div class="form-group">
                                        <input type="hidden" value="{{ reclamation.id }}" name="idreca">
                                        <label for="message-text" class="form-control-label">Message:</label>
                                        <textarea class="form-control"  name="message" id="message-text"></textarea>
                                    </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Send message</button>
                            </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            {% endfor %}
            </div>
        </a>
    </table>

            <a href="{{ path('Archive',{'name':' archive'}) }}"><input type="button" value="Consulter archive"></a>



<script src="{{ asset('jquery-3.2.1.min.js') }}"></script>
    <script>
        $(document).ready(function () {
            $('#recherche').on('keyup', function () {
                $search = $(this).val();
                $.ajax({
                    url: "{{ path('_ajax') }}",
                    data: {'search': $search }
                }).success(function (response) {
                    $('.r').html(response)
                }).catch(function (err) {

                });
            });
        });
{% endblock core %}